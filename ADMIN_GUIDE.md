# 🛠️ 管理后台配置指南

本项目新增了受密码保护的管理后台，用于管理自定义域名配置。

## 🔐 访问管理后台

### 访问地址
```
https://your-worker-domain.workers.dev/admin
```

### 默认账户
- **用户名**: `admin`
- **密码**: `admin123` (首次部署后的默认密码)

## 🛡️ 安全配置

### 方式一：通过 GitHub Secrets 设置（推荐）

在 GitHub 仓库的 Settings > Secrets and variables > Actions 中添加：

1. **ADMIN_PASSWORD**
   - 设置自定义的管理员密码
   - 建议使用强密码，包含字母、数字和特殊字符

### 方式二：通过 wrangler 命令行设置

```bash
# 设置管理员密码
wrangler secret put ADMIN_PASSWORD

# 设置管理员用户名（可选，默认为 admin）
wrangler secret put ADMIN_USERNAME
```

### 方式三：修改 wrangler.toml（不推荐用于生产环境）

```toml
[vars]
ADMIN_USERNAME = "your-username"
# 注意：密码应该使用 secret 设置，不要直接写在配置文件中
```

## 🎯 管理后台功能

### 📊 统计仪表板
- 显示总域名数量
- GitHub 域名数量
- 自定义域名数量

### ➕ 域名管理
- **单个添加**: 输入域名和描述，一键添加
- **批量添加**: 支持批量导入域名列表
- **域名优选**: 为指定域名执行 IP 优选
- **域名删除**: 删除不需要的域名
- **清空操作**: 一键清空所有自定义域名

### 🔄 实时操作
- 实时刷新域名列表
- 显示域名解析状态
- 显示添加时间和描述信息

## 📝 批量操作格式

在批量添加域名时，支持以下格式：

```
example1.com|第一个域名的描述
example2.com|第二个域名的描述
example3.com
cdn.example.com|CDN域名
```

每行一个域名，使用 `|` 分隔域名和描述，描述是可选的。

## 🚀 部署后配置

### 首次部署后：

1. **访问管理后台**
   ```
   https://your-worker-domain.workers.dev/admin
   ```

2. **使用默认账户登录**
   - 用户名: `admin`
   - 密码: `admin123`

3. **修改默认密码**（强烈推荐）
   ```bash
   wrangler secret put ADMIN_PASSWORD
   # 输入新的强密码
   ```

### GitHub Actions 自动化部署

如果使用 GitHub Actions 部署，系统会自动：
- 检查是否设置了 `ADMIN_PASSWORD` secret
- 如果未设置，使用默认密码 `admin123`
- 如果已设置，使用自定义密码

## 🔒 安全最佳实践

1. **修改默认密码**
   - 立即修改默认密码
   - 使用强密码策略

2. **限制访问**
   - 只在可信网络环境下访问管理后台
   - 定期更换管理员密码

3. **监控访问**
   - 关注 Worker 的访问日志
   - 如发现异常访问及时处理

4. **备份配置**
   - 定期导出自定义域名配置
   - 保存重要域名列表的备份

## 🛠️ 故障排除

### 无法访问管理后台
1. 检查 Worker 是否部署成功
2. 确认访问地址正确
3. 检查网络连接

### 密码认证失败
1. 确认用户名和密码正确
2. 检查是否设置了自定义密码
3. 尝试使用默认密码 `admin123`

### 功能异常
1. 检查 KV 命名空间是否正确绑定
2. 确认 Worker 有足够的权限
3. 查看浏览器控制台错误信息

## 📞 技术支持

如果遇到问题，请：
1. 查看 Worker 日志
2. 检查 wrangler.toml 配置
3. 确认所有 secrets 已正确设置
4. 联系技术支持

---

**重要提醒**: 管理后台包含敏感操作，请务必保护好管理员账户信息，定期更换密码，并确保只有授权人员可以访问。
